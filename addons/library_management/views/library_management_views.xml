<?xml version="1.0" encoding="utf-8"?>
<odoo>
    
    <!-- Form View -->
    <record id="view_library_management_form" model="ir.ui.view">
        <field name="name">library.management.form</field>
        <field name="model">library.management</field>
        <field name="arch" type="xml">
            <form string="Library Book">
                <header>
                    <button name="action_check_isbn" 
                            string="CHECK ISBN" 
                            type="object" 
                            class="btn-primary"/>
                </header>
                <sheet>
                    <group>
                        <group>
                            <field name="title"
                                required="1"
                                placeholder="Enter book title"
                                help="Type the full title of the book."/>

                            <field name="author_ids"
                                widget="many2many_tags"
                                help="Select one or more authors for this book."/>

                            <field name="publisher_id"
                                help="Choose the publisher of the book."/>

                            <field name="date_published"
                                help="Enter the publication date of the book."/>
                        </group>

                        <group>
                            <field name="isbn"
                                placeholder="Enter 13-digit ISBN"
                                help="Enter the ISBN number (13 digits)."/>

                            <field name="active"
                                help="Uncheck this to archive the book record."/>

                            <field name="webpage_link"
                                string="Wikipage Link"
                                placeholder="e.g. https://en.wikipedia.org/wiki/PHP"
                                help="Enter the Wikipedia or reference webpage link for this book."/>

                            <field name="image"
                                string="Cover"
                                widget="image"
                                options="{'size': [400, 400], 'preview_image': 'image'}"
                                help="Upload the book cover image."/>
                        </group>
                    </group>

                </sheet>
            </form>
        </field>
    </record>

    <!-- Tree View -->
    <record id="view_library_management_tree" model="ir.ui.view">
        <field name="name">library.management.tree</field>
        <field name="model">library.management</field>
        <field name="arch" type="xml">
            <list string="Library Books">
                <field name="title"/>
                <field name="author_ids" widget="many2many_tags"/>
                <field name="publisher_id"/>
                <field name="date_published"/>
            </list>
        </field>
    </record>

    <!-- Search View with Filters -->
    <record id="view_library_management_search" model="ir.ui.view">
        <field name="name">library.management.search</field>
        <field name="model">library.management</field>
        <field name="arch" type="xml">
            <search string="Search Books">
                <!-- Search Fields -->
                <field name="title"/>
                <field name="author_ids"/>
                <field name="publisher_id"/>
                <field name="isbn"/>
                
                <!-- Filters Section -->
                <filter string="Active Books" name="filter_active" 
                        domain="[('active', '=', True)]"/>
                <filter string="Inactive Books" name="filter_inactive" 
                        domain="[('active', '=', False)]"/>
                <separator/>
                
                <!-- Group By Section -->
                <filter string="Publisher" name="group_publisher" 
                        context="{'group_by': 'publisher_id'}"/>
                <filter string="Publication Date" name="group_date_published" 
                        context="{'group_by': 'date_published'}"/>
            </search>
        </field>
    </record>

    <!-- Action -->
    <record id="action_library_management" model="ir.actions.act_window">
        <field name="name">Library Books</field>
        <field name="res_model">library.management</field>
        <field name="view_mode">list,form</field>
        <field name="search_view_id" ref="view_library_management_search"/>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Create your first book record
            </p>
        </field>
    </record>

</odoo>