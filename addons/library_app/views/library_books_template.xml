<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Website Template: /library/books -->
    <template id="library_books_template" name="Library Books">
        <!-- Inherit the default website layout -->
        <t t-inherit="website.layout">
            <t t-block="content">

                <div class="container mt-4 mb-5">

                    <!-- Page Header -->
                    <div class="row">
                        <div class="col-12">
                            <h1 class="text-center mb-4">Library Books</h1>
                        </div>
                    </div>

                    <!-- Book Cards -->
                    <div class="row">
                        <t t-foreach="books" t-as="book">
                            <div class="col-md-4 col-sm-6 col-12 mb-4">
                                <div class="card h-100 shadow-sm">

                                    <!-- Book Cover Image -->
                                    <t t-if="book.image">
                                        <img t-att-src="'/web/image/library.app/' + str(book.id) + '/image'"
                                             class="card-img-top"
                                             alt="Book cover"
                                             style="max-height: 250px; object-fit: cover;"/>
                                    </t>
                                    <t t-else="">
                                        <div class="card-img-top bg-light d-flex align-items-center justify-content-center"
                                             style="height: 250px;">
                                            <span class="text-muted">No Cover</span>
                                        </div>
                                    </t>

                                    <!-- Book Details -->
                                    <div class="card-body d-flex flex-column">
                                        <h5 class="card-title" t-esc="book.title"/>

                                        <p class="card-text mb-1">
                                            <strong>Authors: </strong>
                                            <t t-if="book.author_ids">
                                                <span t-esc="', '.join(book.author_ids.mapped('name'))"/>
                                            </t>
                                            <t t-else="">
                                                <span class="text-muted">N/A</span>
                                            </t>
                                        </p>

                                        <p class="card-text mb-1">
                                            <strong>Publisher: </strong>
                                            <t t-if="book.publisher_id">
                                                <span t-esc="book.publisher_id.name"/>
                                            </t>
                                            <t t-else="">
                                                <span class="text-muted">N/A</span>
                                            </t>
                                        </p>

                                        <p class="card-text mb-1">
                                            <strong>ISBN: </strong>
                                            <t t-if="book.isbn">
                                                <span t-esc="book.isbn"/>
                                            </t>
                                            <t t-else="">
                                                <span class="text-muted">N/A</span>
                                            </t>
                                        </p>

                                        <p class="card-text">
                                            <strong>Published: </strong>
                                            <t t-if="book.date_published">
                                                <span t-esc="book.date_published.strftime('%B %d, %Y')"/>
                                            </t>
                                            <t t-else="">
                                                <span class="text-muted">N/A</span>
                                            </t>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </div>

                    <!-- Empty State: shown when no books exist -->
                    <t t-if="not books">
                        <div class="row">
                            <div class="col-12 text-center">
                                <p class="text-muted">No books available at the moment.</p>
                            </div>
                        </div>
                    </t>

                </div>

            </t>
        </t>
    </template>

</odoo>
